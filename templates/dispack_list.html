{% extends "base_tmp.html" %}
{% block content %}
{#
<div class="d-flex flex-wrap align-items-left gap-2 mb-2 p-2 bg-light border rounded">
    <h5 class="mb-0 me-2 ">{{ title }}</h5>
    <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modalAdd">
        ‚ûï –î–æ–¥–∞—Ç–∏
    </button>
    <form class="d-flex" method="post" style="margin: 0;">
        <div class="input-group input-group-sm table-panell" >
            <input class="form-control input-serial " type="search" placeholder="–°–µ—Ä—ñ–π–Ω–∏–π..." name="tov_serial" value="{{ search }}">
            <button class="btn btn-success" type="submit">–®—É–∫–∞—Ç–∏</button>
        </div>
    </form>
    <button type="button" class="btn btn-outline-dark btn-sm" onclick="copyTable()">
        üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏
    </button>
</div>#}

<div class="d-flex flex-wrap align-items-center gap-2 mb-2 p-2 bg-light border rounded">
    <h5 class="mb-0 me-3">{{ title }}</h5>
    <form class="d-flex align-items-center gap-2 m-0" method="post" style="flex-grow: 1; max-width: 800px;">
        <div class="input-group input-group-sm table-panell">
            <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#modalAdd">
                ‚ûï –î–æ–¥–∞—Ç–∏
            </button>
            <input class="form-control input-serial " type="search" placeholder="–°–µ—Ä—ñ–π–Ω–∏–π..." name="search" value="{{ search }}">
            <button class="btn btn-success" type="submit">–®—É–∫–∞—Ç–∏</button>
        </div>
        <button type="button" class="btn btn-outline-dark btn-sm text-nowrap" onclick="copyTable()">
            üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏
        </button>
    </form>
</div>



<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
<!--<link rel="stylesheet" href="{{ url_for('static', filename='css/tables.css') }}">-->
<link rel="stylesheet" href="{{ url_for('static', filename='css/tables.css') }}?v={{ app_version }}">

<table id="tList" class="table table-sm table-compact table-hover">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>–ù–æ–º–µ—Ä –∞–∫—Ç—É</th>
      <th>–î–∞—Ç–∞ –∞–∫—Ç—É</th>
      <th>–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</th>
      <th>–°–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä</th>
      <th>–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª</th>
      <th>–ú—ñ—Ç–∫–∞</th>
      <th>–î–æ–∫—É–º–µ–Ω—Ç–∏</th>
    </tr>
  </thead>
<tbody>
  {% for row in data %}
    <tr class = "{{ mark_colors.get(row.DOC_MARK_TYPE, '') }}">
    <td >{{ row.NUM }}</td>
    <td >{{ row.NU }}</td>
    <td >{{ row.DATE_DOK.strftime('%d.%m.%Y') }}</td>
    <td class="text-primary fw-bold col-limit" >{{ row.TOV_NAME }}</td>
    <td class="text-success fw-bold" >{{ row.TOVAR_SER_NUM }}</td>
    <td>{{ row.SKLAD_NAME }}</td>
    <td>{{ row.DOC_MARK_TYPE }}</td>
    <td >
        <strong>–ê–í–† —Ç–∞ –í–ó : </strong> <a href="/dispack/doc1/{{ row.NUM | int }}"> {{ row.NU }}</a>
<!--      <a href="/dispack/doc1/{{ row.NUM }}"-->
<!--         class="btn btn-sm btn-outline-secondary btn-xs"-->
<!--         title="–°–ø–∏—Å–∞–Ω–Ω—è –∑—ñ —Å–∫–ª–∞–¥—É">–ê–∫—Ç –í–†-->
<!--          <i class="bi bi-pencil"></i></a>-->
<!--      <a href="/dispack/doc2/{{ row.NUM }}"-->
<!--         class="btn btn-sm btn-outline-secondary btn-xs"-->
<!--         title="–û–ø—Ä–∏–±—É—Ç–∫—É–≤–∞–Ω–Ω—è –Ω–∞ —Å–∫–ª–∞–¥">–í–≤–µ–¥. –∑–∞–ª–∏—à–∫—ñ–≤-->
<!--          <i class="bi bi-pencil"></i></a>-->
    </td>
  {% endfor %}
</tbody>
</table>

<!--&#45;&#45; MODAL -->
<div class="modal fade" id="modalAdd" tabindex="-1" aria-labelledby="modalAddLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="POST" action="{{ url_for('dispack_add') }}"> <div class="modal-header">
                    <h5 class="modal-title" id="newEntryModalLabel">–†–æ–∑–∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü—ñ—è</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex align-items-center mb-3">
                        <label for="nu" class="form-label fw-bold mb-0 me-2" style="white-space: nowrap;">–ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç—É</label>
                        <input type="text" id="nu" class="form-control form-control-sm flex-grow-1" name="nu" required>
                    </div>
                    <div class="d-flex align-items-center mb-3">
                        <label for="nd" class="form-label fw-bold mb-0 me-2" style="white-space: nowrap;">–î–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç—É</label>
                        <input type="date" id="nd" class="form-control form-control-sm flex-grow-1" name="nd" required>
                    </div>

                    <div class="d-flex align-items-center mb-3">
                        <label for="serial" class="form-label fw-bold mb-0 me-2" style="white-space: nowrap;">–°–µ—Ä—ñ–π–Ω–∏–π –Ω–æ–º–µ—Ä</label>
                        <input type="text" id="serial" class="form-control form-control-sm flex-grow-1" name="serial" required>
                    </div>
                    <div class="d-flex align-items-center mb-3">
                        <label for="price" class="form-label fw-bold mb-0 me-2" style="white-space: nowrap;">–¶—ñ–Ω–∞ –ë–ø–õ–ê</label>
                        <input type="number" id="price" class="form-control form-control-sm flex-grow-1" name="price" required step="0.01">
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                    <button type="submit" class="btn btn-primary">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!--&#45;&#45;-->

<script src="{{ url_for('static', filename='js/tables.js') }}"></script>

    <script>
        $(document).ready(function() {
            initDefaultDataTable('#tList', {
                "pageLength": 25 // –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ü—ñ—î—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏
            });
        });
    </script>

{% endblock %}