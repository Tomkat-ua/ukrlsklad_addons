{% extends "base_tmp.html" %}
{% block content %}

{#
<div class="d-flex flex-wrap align-items-left gap-2 mb-2 p-2 bg-light border rounded">
    <h5 class="mb-0 me-2 ">{{ title }}</h5>
    <form class="d-flex" method="post" style="margin: 0;">
        <div class="input-group input-group-sm " style="width: 600px;">
            <input class="form-control input-serial"  type="search" placeholder="–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è..." name="tov_name"   value="{{ tov_name }}">
            <input class="form-control input-serial"  type="search" placeholder="–°–µ—Ä—ñ–π–Ω–∏–π..."     name="tov_serial" value="{{ search_value }}">
            <button class="btn btn-success" type="submit">–®—É–∫–∞—Ç–∏</button>
        </div>
    </form>
    <button type="button" class="btn btn-outline-dark btn-sm" onclick="copyTable()">
        üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏
    </button>
</div>#}

<div class="d-flex flex-wrap align-items-center gap-2 mb-2 p-2 bg-light border rounded">
    <h5 class="mb-0 me-3">{{ title }}</h5>
    <form class="d-flex align-items-center gap-2 m-0" method="post" style="flex-grow: 1; max-width: 800px;">
        <div class="input-group input-group-sm table-panell">
            <input class="form-control input-serial"  type="search" placeholder="–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è..." name="tov_name"   value="{{ tov_name }}">
            <input class="form-control input-serial"  type="search" placeholder="–°–µ—Ä—ñ–π–Ω–∏–π..."     name="tov_serial" value="{{ search_value }}">
            <button class="btn btn-success" type="submit">–®—É–∫–∞—Ç–∏</button>
        </div>
        <button type="button" class="btn btn-outline-dark btn-sm text-nowrap" onclick="copyTable()">
            üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏
        </button>
    </form>
</div>

<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">
<!--<link rel="stylesheet" href="{{ url_for('static', filename='css/tables.css') }}">-->
<link rel="stylesheet" href="{{ url_for('static', filename='css/tables.css') }}?v={{ app_version }}">

<!--<table id="tList" class="table table-sm table-striped table-bordered table-compact">-->
<table id="tList" class="table table-main">
    <thead class="table-dark">
    <tr>
      <th>TOVAR_ID</th>
      <th>–°–µ—Ä—ñ–π–Ω–∏–π –ù–æ–º–µ—Ä</th>
      <th >–ö–æ–¥ –Ω–æ–º–µ–Ω–∫.</th>
      <th>–ù–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è</th>
      <th>–ü—ñ–¥—Ä–æ–∑–¥—ñ–ª</th>
      <th>–°—Ç–∞—Ç—É—Å</th>
      <th>–î—ñ—ó</th>
    </tr>
  </thead>
  <tbody>
    {% for row in rows %}
    <tr>
      <td >{{ row.TOVAR_ID }}</td>
      <td class="fw-bold text-success" >{{ row.TOVAR_SER_NUM }}</td>
      <td >{{ row.KOD }}</td>
      <td class="fw-bold text-primary col-limit" >{{ row.TOV_NAME }}</td>
      <td>{{ row.PLACE }}</td>
      <td >
<!--&#45;&#45; '–í—Ç—Ä–∞—á–µ–Ω–æ'-->
  {% set status_text = row.STATUS_CODE %}
    {% if status_text == 8 %}
        <form target="_blank" method="POST" action="{{ url_for('losses_list') }}" style="display:inline;">
            <input type="hidden" name="tov_serial" value="{{ row.TOVAR_SER_NUM }}">
            <button type="submit"
                    class="badge rounded-pill bg-danger text-white fs-6 px-2 py-2 shadow border-0 status-badge" title=">> –¥–æ –í—Ç—Ä–∞—Ç–∏">
                {{ row.STATUS }} >>
            </button>
        </form>
<!--&#45;&#45; '–†–æ–∑–∫–æ–º–ø–ª–µ–∫—Ç'          -->
    {% elif status_text == 9 %}
        <form target="_blank" method="POST" action="{{ url_for('dispack_list') }}" style="display:inline;">
            <input type="hidden" name="tov_serial" value="{{ row.TOVAR_SER_NUM }}">
            <button type="submit"
                    class="badge rounded-pill bg-secondary text-white fs-6 px-2 py-2 shadow border-0 status-badge" title=">> –¥–æ –†–æ–∑–∫–æ–º–ø–ª–µ–∫—Ç—É–≤–∞–Ω–Ω—è">
                {{ row.STATUS }} >>
            </button>
        </form>
<!--&#45;&#45; '–°–ø–∏—Å–∞–Ω–æ (–ø–æ –≤—Ç—Ä–∞—Ç—ñ)'          -->
    {% elif status_text == 10 %}
        <form target="_blank" method="POST" action="{{ url_for('snakl_list' ) }}" style="display:inline;">
            <input type="hidden" name="tov_serial" value="{{ row.TOVAR_SER_NUM }}">
            <button type="submit"
                    class="badge rounded-pill bg-warning text-dark fs-6 px-2 py-2 shadow border-0 status-badge" title=">> –¥–æ –°–ø–∏—Å–∞–Ω–Ω—è">
                {{ row.STATUS }} >>
            </button>
        </form>
<!--&#45;&#45;&#45;&#45; —Å–ø–∏—Å–∞–Ω–æ –ø–æ  –∞–∫—Ç –ø—É—Å–∫—É-->
    {% elif status_text == 5 %}
        <form target="_blank" method="POST" action="{{ url_for('snakl_list') }}" style="display:inline;">
            <input type="hidden" name="tov_serial" value="{{ row.TOVAR_SER_NUM }}">
            <button type="submit"
                    class="badge rounded-pill btn-info text-dark fs-6 px-2 py-2 shadow border-0 status-badge" title=">> –¥–æ –í—Ç—Ä–∞—Ç–∏">
                {{ row.STATUS }} >>
            </button>
        </form>
<!--&#45;&#45;'–ù–∞ –æ–±–ª—ñ–∫—É'-->
    {% else %}
        <span class="badge rounded-pill bg-success text-light fs-6 px-2 py-2 shadow status-badge">
            {{ row.STATUS }}
        </span>
    {% endif %}
      </td>
      <td >
          <a href="{{ url_for('ghist_details', row_id=row.SERIAL_ID) }}"
             class="btn btn-sm btn-outline-secondary btn-xs">–î–µ—Ç–∞–ª—ñ <i class="bi bi-pencil"></i></a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>


 <script src="{{ url_for('static', filename='js/tables.js') }}"></script>

<!--    <script>-->
<!--        $(document).ready(function() {-->
<!--            initDefaultDataTable('#tList', {-->
<!--                "pageLength": 25 // –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ü—ñ—î—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏-->
<!--            });-->
<!--        });-->
<!--    </script>-->


{% endblock %}



